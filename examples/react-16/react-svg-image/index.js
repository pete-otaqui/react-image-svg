"use strict";var u=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var C=Object.prototype.hasOwnProperty;var A=(e,n)=>{for(var r in n)u(e,r,{get:n[r],enumerable:!0})},I=(e,n,r,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of S(n))!C.call(e,o)&&o!==r&&u(e,o,{get:()=>n[o],enumerable:!(t=y(n,o))||t.enumerable});return e};var R=e=>I(u({},"__esModule",{value:!0}),e);var D={};A(D,{ImageFormat:()=>h,ImageOutput:()=>w,renderSvgAsImage:()=>x,setDomRenderer:()=>T});module.exports=R(D);var h=(t=>(t.PNG="png",t.JPEG="jpeg",t.WEBP="webp",t))(h||{}),w=(r=>(r.DATA_URL="data_url",r.BLOB="blob",r))(w||{}),P="data-react-svg-image-injector-container",g;function T(e){g=e}async function x(e,{format:n="png",injectSelector:r="body",output:t="data_url",scale:o=1,quality:i=.97,throwErrors:s=!0,ignoreAllSelectors:c=[]}={}){try{if(!g)throw new Error("You must call setDomRenderer before calling renderSvgAsImage");let l=G(),a=document.querySelector(r);if(!a)throw new Error(`Could not find element with selector ${a}`);if(!Object.values(h).includes(n))throw new Error(`Invalid image format ${n}`);if(!Object.values(w).includes(t))throw new Error(`Invalid image output ${t}`);let E=j(a,l);try{await g(e,E)}catch(p){throw d(a,l),console.error("Failed to render element"),p}let m=E.querySelector("svg");if(!m)throw d(a,l),new Error("Could not find a rendered SVG");L(m,c);let v=await B(m,o),b=O(v,t,n,i);return d(a,l),b}catch(l){if(s)throw l;return console.error(l),""}}function j(e,n){let r=document.createElement("div");return r.setAttribute("data-react-svg-image-injector-container",n),r.style.visibility="hidden",r.style.position="absolute",r.style.top="0",r.style.left="0",e.appendChild(r),r}function d(e,n){let r=e.querySelector(`[${P}="${n}"]`);r?e.removeChild(r):console.error(`Could not find injector container with id ${n}`)}function G(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}function L(e,n){n.forEach(r=>{var o;let t=e.querySelectorAll(r);for(let i=0;i<t.length;i++)(o=t[i].parentNode)==null||o.removeChild(t[i])}),f(e,e)}function f(e,n){let r=window.getComputedStyle(e);for(let t of r)t!=="visibility"&&(n.style[t]=r[t]);for(let t=0;t<e.children.length;t++)f(e.children[t],n.children[t])}function B(e,n){let r=new XMLSerializer().serializeToString(e),t=document.createElement("canvas"),o=e.getBoundingClientRect();t.width=o.width*n,t.height=o.height*n,t.style.width=`${o.width}px`,t.style.height=`${o.height}px`;let i=t.getContext("2d");if(!i)throw new Error("Could not get canvas context");i.scale(n,n);let s=document.createElement("img");return s.setAttribute("src","data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r)))),new Promise(c=>{s.onload=()=>{if(!i)throw new Error("Could not get canvas context");i.drawImage(s,0,0),c(t)}})}async function O(e,n,r,t){if(n==="data_url")return V(e,r,t);{let o=await $(e,r,t);if(!o)throw new Error("Could not convert canvas to blob");return o}}function V(e,n,r){return e.toDataURL(`image/${n}`,r)}function $(e,n,r){return new Promise(t=>{e.toBlob(o=>t(o),`image/${n}`,r)})}0&&(module.exports={ImageFormat,ImageOutput,renderSvgAsImage,setDomRenderer});
//# sourceMappingURL=index.js.map